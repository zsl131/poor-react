<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
  <meta name="format-detection" content="telephone=no"/>
  <meta name="format-detection" content="email=no"/>
  <link rel="icon" href="/publicFile/logo.png" type="image/x-icon"/>
  <script src="http://res2.wx.qq.com/open/js/jweixin-1.4.0.js" type="text/javascript"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
  <title><%= context.title %></title>
  <script type="text/javascript">
    var shareObj = {};

    const start = "奇思教育-";

    window.wx.error(function(res){
      //alert(res)
    })

    window.wx.ready(function() {
      const url = window.location.href;
      const domain = window.location.protocol+"//"+window.location.host; //域名
      let imgUrl = shareObj.imgUrl?(domain+shareObj.imgUrl):domain+"/publicFile/logo.png";
      if(!shareObj.desc) {shareObj.desc = "科学来源于生活，科学改变生活";}
      // alert(shareObj.title+"--"+shareObj.desc);
      // Toast.info("wxReady");   ///
      //分享给朋友
      window.wx.updateAppMessageShareData({
        title: start+shareObj.title, // 分享标题
        desc: shareObj.desc,
        link: url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl: imgUrl, // 分享图标
        success: function () {
          // 设置成功
          //Toast.success("分享成功");
        },
        fail: function(res) {
          //Toast.fail(res);
        }
      });

      //分享到朋友圈
      window.wx.updateTimelineShareData({
        title: start+shareObj.title, // 分享标题
        desc: shareObj.desc,
        link: url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl: imgUrl, // 分享图标
        success: function () {
          // 用户点击了分享后执行的回调函数
          //Toast.success("分享成功");
        },
        fail: function(res) {
          //Toast.fail(res);
        }
      })

      window.wx.onMenuShareTimeline({
        title: start+shareObj.title, // 分享标题
        link: url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl: imgUrl, // 分享图标
        success: function () {
          // 用户点击了分享后执行的回调函数
        }
      })

      window.wx.onMenuShareAppMessage({
        title: start+shareObj.title, // 分享标题
        desc: shareObj.desc, // 分享描述
        link: url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl: imgUrl, // 分享图标
        type: '', // 分享类型,music、video或link，不填默认为link
        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
        success: function () {
// 用户点击了分享后执行的回调函数
        }
      })
    })

  </script>
</head>
<body>
<div id="root"></div>

</body>
</html>
